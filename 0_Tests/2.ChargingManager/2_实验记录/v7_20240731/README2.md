# V7-2

**实验目的：**

详细测试模块的各项数据及功能

**实验内容：**

0> 状态显示逻辑表

1> 稳压输出测试

2> 放电保护功能测试

3> 充电保护功能测试

**实验结果：**

***0 >*** 

板载5只LED用来指示不同工况下的模块工作状态，如下图所示

<img src="Pics\3.png" alt="3" style="zoom:45%;" />

其中各LED的功能：

| 序号 | 名称       |      功能      |
| ---- | :--------- | :------------: |
| 1    | Charging   |   充电指示灯   |
| 2    | Completed  |   充满指示灯   |
| 3    | SrcDisplay |  供电源指示灯  |
| 4    | 3.3V       | 3.3V输出指示灯 |
| 5    | 5.0V       | 5.0V输出指示灯 |

在各种工况下，电路板的显示效果实验如下表所示

> 注：
>
> ① LED状态：黑色表示该LED熄灭，红/绿/蓝/白表示该LED的实际发光颜色，一半为黑色表示该LED闪烁。
>
> ② 电池状态：![4-0a](Pics\4-0a.png)表示正在充电，![4-0b](Pics\4-0b.png)表示充电完成，![4-0c](Pics\4-0c.png)表示正在放电，![4-0d](Pics\4-0d.png)表示电池欠压；
>
> ③负载及供电状态：![4-0a](Pics\4-0f.png)表示外部供电源接入，![4-0a](Pics\4-0e.png)表示负载接入。

| 工况                                                       |        预期        |                      实际                       |
| :--------------------------------------------------------- | :----------------: | :---------------------------------------------: |
| 供电源**接入**，电池**断开**                               | ![](Pics\4-1a.png) |  <img src="Pics\4-2a.jpg" style="zoom:12.5%;">  |
| 供电源**接入**，电池**接入**且**正在充电**                 | ![](Pics\4-1b.png) | <img src="Pics\4-2b.jpg" style="zoom:12.5%;" /> |
| 供电源**接入**，电池**接入**且**完成充电**                 | ![](Pics\4-1c.png) | <img src="Pics\4-2c.jpg" style="zoom:12.5%;" /> |
| 供电源**断开**，电池**接入**（负载**接入**且）**正常运作** | ![](Pics\4-1d.png) | <img src="Pics\4-2d.jpg" style="zoom:12.5%;" /> |
| 供电源**断开**，电池**接入**（负载**接入**且）**过放电**   | ![](Pics\4-1e.png) | <img src="Pics\4-2e.jpg" style="zoom:12.5%;" /> |
| 供电源**接入**，电池**接入**负载**接入**且**过流/短路**    | ![](Pics\4-1f.png) |  <img src="Pics\4-2g.jpg" style="zoom:25%;" />  |
| 供电源**接入**，电池**接入**负载**断开**且**过流/短路**    | ![](Pics\4-1h.png) |  <img src="Pics\4-2f.jpg" style="zoom:25%;" />  |
| 供电源**断开**，电池**接入**负载**接入**且**过流/短路**    | ![](Pics\4-1g.png) |  <img src="Pics\4-2h.jpg" style="zoom:12%;" />  |

更正：第6列示意图中Charging指示灯应为红色

***1 >*** 

见 [V7-1报告](README1.md) 实验结果 1>

***2&3 >*** 

分别使用2块3.7V软包电池进行充、放电测试实验，实验数据如[表](Record.xlsx)所示。其中，电池1是一块标称3.7V的1000mAh软包电池，电池2是一块标称3.7V的2000mAh软包电池。多个图表的横坐标为时间戳（单位秒），纵坐标为直接测量电池两极极所得的电池电压（单位伏特）。

> 由于软包电池自带保护板，因此在[V7-1报告](README1.md) 中所测量的过充保护及过放保护电压实际为保护板所实现，本次实验将上述保护板拆除后进行，可以发现模块实现了过充保护，但未实现过放保护（后文详述）



*① 电池1的充放电实验*

![](Pics\5.png)

**阶段1**：此次`TP4056`充电电流设置为1000mA，因此此阶段未做散热措施导致充电过程多次自动停止

**阶段2**：此阶段由于多次充电停止后未能及时散热，充电宝触发休眠，故实际上为模块自放电过程，即静态放电过程

**阶段3**：此阶段为正常充电过程，且可以看出符合`TP4056`所设定的充电电压曲线

**阶段4**：此阶段为静态放电过程

**阶段5**：此阶段为轻负载放电过程

**阶段6**：此阶段为重负载放电过程，由于拆除保护板，电池未能得到过放保护，这是因为模块中`DW06`周边电路的原理图设计有问题（电池两极应当接BAT_P/N_I，在[V3版](..\v3_20240716\README.md)中改为了接BAT_P/N_O，此处错误一直未能发现，后续将对此进行更改）。可以看出电池在放电至3.3V附近时电压开始急剧下降，因此`DW06`的过放保护电压设置在3.3V附近较为合适



*② 电池2的充放电实验*

![](Pics\6.png)

从左向右6个阶段依次为正常充电、充满后进入过充保护（实际上是自放电即静态放电）、静态放电、负载放电、带负载充电、带负载充满后进入过充保护（实际上还是静态放电过程）。



本次实验验证了以下结论：

Ⅰ.***电池1、2的充放电实验*** 均可说明充电保护功能正常 ；

Ⅱ.***电池2的充放电实验*** 中阶段1与阶段5、阶段2与阶段6几乎无差别表明外部电源接入时，电池不能进行放电，负载由外部电源进行供电，这说明供电源路径选择电路设计没有问题；

Ⅲ.***电池1、2的充放电实验*** 均可说明放电保护功能异常，原因是`DW06`外围电路绘制有误。 



***后续更改设想：***

①`DW06`相关电路勘误

②`SrcDisplay`实际上没有接限流电阻，容易烧毁；

​     最初的设计逻辑是，`SrcDisplay`亮起表示“当前由外部电源供电”，熄灭则表示“当前由电池供电”，这样设计不太严谨，后续可加入另一个指示灯，由其状态来指示电池是否参与供电。

③模块不对外部负载供电时，DCDC模块却仍然在工作，浪费电能，可以加入开关控制这部分电路是否工作

④按照数据手册所提供的Layout参考优化`TPS63802`的布线



**实验日期：**

2024.08.02~2024.08.04
